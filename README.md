# SuperClaude Phase Tracking - 개요 및 사용자 가이드

SuperClaude 프레임워크를 위한 개발 단계(Phase) 관리 기능입니다.
마크다운 기반 작업 계획서를 파싱하여 Phase 단위로 진행 상황을 추적하고 관리합니다.

---

## 목차

1. [기능 소개](#1-기능-소개)
2. [빠른 시작](#2-빠른-시작)
3. [주요 개념](#3-주요-개념)
4. [사용 시나리오](#4-사용-시나리오)
5. [워크플로우](#5-워크플로우)
6. [FAQ](#6-faq)

---

## 1. 기능 소개

### 1.1 해결하는 문제

개발 프로젝트에서 설계 문서에 작성된 구현 계획을 실제로 추적하기 어려운 문제를 해결합니다:

- 현재 어느 Phase까지 진행됐는지 파악 어려움
- 다음에 무엇을 해야 하는지 확인 필요
- Phase 간 의존성 관리 부재
- 설계 변경 시 영향 범위 파악 어려움

### 1.2 핵심 기능

| 기능 | 설명 |
|------|------|
| **계획 파싱** | 마크다운 문서에서 Phase/Task 구조 자동 추출 |
| **진행 추적** | Phase 단위 상태 관리 (대기 → 진행 중 → 완료) |
| **의존성 강제** | 선행 Phase 미완료 시 다음 Phase 시작 차단 |
| **자동 연동** | Phase 시작 시 `/sc:implement` 자동 호출 |
| **재설계 지원** | 원본 문서 수정 + 연쇄 영향 분석 |
| **롤백 지원** | Phase 상태 롤백 (Git은 수동 안내) |
| **세션 유지** | Serena Memory로 상태 영속화 |
| **자동 알림** | 완료 가능 상태 및 에러 자동 알림 |

### 1.3 지원 환경

- **프레임워크**: SuperClaude Framework
- **MCP 서버**: Serena (메모리 관리)
- **계획서 형식**: 마크다운 (`.md`)

### 1.4 설치 범위

| 구성요소 | 위치 | 범위 |
|----------|------|------|
| **명령어** | `~/.claude/commands/` | 전역 (사용자 레벨) |
| **Serena Memory** | MCP 서버 메모리 | 전역 (세션 간 공유) |
| **상태 파일** | 각 프로젝트 `.superclaud/` | 프로젝트별 격리 |

```
┌─────────────────────────────────────────────────┐
│  ~/.claude/commands/sc/plan.md  ← 전역 명령어    │
└─────────────────────────────────────────────────┘
                    │
        ┌───────────┼───────────┐
        ↓           ↓           ↓
   ProjectA/    ProjectB/    ProjectC/
   .superclaud/ .superclaud/ .superclaud/
   progress.yaml progress.yaml progress.yaml
   (독립 상태)    (독립 상태)    (독립 상태)
```

- **효과**: 모든 프로젝트에서 동일한 명령어 사용, 상태는 프로젝트별 독립 관리

---

## 2. 빠른 시작

### 2.1 최소 요구사항

1. SuperClaude 프레임워크 설치
2. Serena MCP 서버 활성화
3. 마크다운 형식의 작업 계획서

### 2.2 계획서 형식

계획서는 다음 형식을 따라야 합니다:

```markdown
## 9. 구현 순서

### Phase 1-1: 기반 시스템 (1~2일)
- [ ] 프로젝트 설정
- [ ] GameManager 싱글톤
- [ ] SafeAreaManager
- [ ] 기본 씬 구조

### Phase 1-2: 플레이어 시스템 (2~3일)
- [ ] Player 씬/스크립트
- [ ] 터치 입력 (드래그 이동)
- [ ] 자동 사격 시스템
```

### 2.3 기본 사용법

```bash
# 1. 계획서 로드
/sc:plan-load docs/Design_Phase1.md

# 2. 현재 상태 확인
/sc:plan-status

# 3. Phase 시작 (자동으로 /sc:implement 연동)
/sc:plan-start Phase 1-1

# 4. 작업 완료 후 Phase 완료 처리
/sc:plan-complete Phase 1-1

# 5. 다음 작업 확인
/sc:plan-next
```

---

## 3. 주요 개념

### 3.1 용어 정의

| 용어 | 설명 |
|------|------|
| **Plan (계획)** | 하나의 마크다운 계획서 파일 전체 |
| **Phase (단계)** | 계획 내 구분된 작업 단위 (예: Phase 1-1) |
| **Task (태스크)** | Phase 내 개별 체크리스트 항목 |
| **Active Plan** | 현재 활성화된 계획 (한 번에 하나만) |

### 3.2 Phase 상태

```
pending (대기)
    ↓ /sc:plan-start
in_progress (진행 중)
    ↓ /sc:plan-complete
completed (완료)

blocked (차단됨) ← 선행 Phase 미완료 시
```

| 상태 | 설명 | 전환 조건 |
|------|------|----------|
| `pending` | 아직 시작되지 않음 | 초기 상태 |
| `in_progress` | 현재 작업 중 | `start` 명령 실행 |
| `completed` | 완료됨 | `complete` 명령 실행 |
| `blocked` | 의존성으로 차단됨 | 선행 Phase 롤백 시 |

### 3.3 의존성 규칙

Phase는 순서대로 진행해야 합니다:

```
Phase 1-1 → Phase 1-2 → Phase 1-3 → ...
```

- Phase 1-2는 Phase 1-1이 `completed` 상태여야 시작 가능
- Phase 1-3 롤백 시 Phase 1-4 이후는 `blocked` 상태로 변경

### 3.4 파일 구조

```
project/
├── .superclaud/
│   └── progress.yaml      # 상태 파일 (자동 생성)
├── docs/
│   └── Design_Phase1.md   # 원본 계획서
```

### 3.5 Serena Memory 구조

세션 간 상태 유지를 위해 3개의 메모리 파일 사용:

| 메모리 | 용도 | 변경 빈도 |
|--------|------|----------|
| `plan_meta.md` | 계획 메타정보 | 낮음 |
| `plan_progress.md` | 현재 진행 상태 | 높음 |
| `plan_history.md` | 변경 이력 | Append only |

---

## 4. 사용 시나리오

### 4.1 신규 프로젝트 시작

```bash
# 설계 문서 작성 후 계획 등록
/sc:plan-load docs/Design_Phase1.md

# 출력 예시:
# 📋 계획서 등록 완료: Design_Phase1
#
# Phase 구조:
# ├── Phase 1-1: 기반 시스템 (4 tasks)
# ├── Phase 1-2: 플레이어 시스템 (5 tasks) → depends: 1-1
# └── ...
#
# 💡 다음 단계: /sc:plan-start Phase 1-1
```

### 4.2 일상적인 개발 작업

```bash
# 오늘 작업 시작 전 상태 확인
/sc:plan-status

# 출력 예시:
# 📊 Design_Phase1 진행 현황
#
# ████████░░░░░░░░░░░░ 28% (2/7 Phases)
#
# ✅ Phase 1-1: 기반 시스템          완료
# 🔄 Phase 1-2: 플레이어 시스템      진행중 (3/5 tasks)
# ⏳ Phase 1-3: 적/탄환 시스템       대기
# ...
#
# 💡 현재 작업: Phase 1-2 - 자동 사격 시스템
```

### 4.3 Phase 완료 처리

```bash
# 모든 태스크 완료 후
/sc:plan-complete Phase 1-2

# 출력 예시:
# ✅ Phase 1-2 완료 처리됨
#
# 📊 진행률: 42% (3/7 Phases)
# 💡 다음 Phase: Phase 1-3 - 적/탄환 시스템
#
# /sc:plan-start Phase 1-3 으로 시작하세요
```

### 4.4 설계 변경 (재설계)

Phase 진행 중 설계 문제 발견 시:

```bash
/sc:plan-redesign Phase 1-2

# 출력 예시:
# 🔄 Phase 1-2 재설계 모드 진입
#
# 📊 영향 분석:
# ├── Phase 1-2: 플레이어 시스템 ← 재설계 대상
# ├── Phase 1-3: 적/탄환 시스템 ⚠️ 영향 가능
# └── Phase 1-4: 웨이브 시스템 ⚠️ 영향 가능
#
# 🤔 재설계 사유를 입력해주세요:
```

### 4.5 문제 발생 시 롤백

```bash
/sc:plan-rollback Phase 1-3

# 출력 예시:
# ⏪ Phase 1-3 롤백
#
# 🔄 롤백 옵션:
# [1] 상태만 롤백 (코드 유지)
#     → Phase 1-3: pending, Phase 1-4: blocked
#
# [2] 전체 롤백 안내
#     → Git 명령어 안내 제공
#
# 선택: _
```

### 4.6 다중 계획서 전환

```bash
# Phase1 완료 후 Phase2로 전환
/sc:plan-list
# Design_Phase1 (active, 100%)
# Design_Phase2 (registered, 0%)

/sc:plan-switch Design_Phase2
# ✅ 활성 계획 전환: Design_Phase2
```

---

## 5. 워크플로우

### 5.1 일반 개발 플로우

```
┌─────────────────────────────────────────────┐
│          /sc:plan-load                       │
│              ↓                               │
│         계획서 파싱                          │
│              ↓                               │
│    ┌─────────────────────┐                  │
│    │  /sc:plan-start     │◄──────┐          │
│    │        ↓            │       │          │
│    │  /sc:implement 자동  │       │          │
│    │        ↓            │       │          │
│    │    작업 수행         │       │          │
│    │        ↓            │       │          │
│    │  자동 완료 알림      │       │          │
│    │        ↓            │       │          │
│    │ /sc:plan-complete   │       │          │
│    │        ↓            │       │          │
│    │   다음 Phase?  ─────┼───Yes─┘          │
│    │        │            │                  │
│    │       No            │                  │
│    └────────┼────────────┘                  │
│             ↓                               │
│        프로젝트 완료                         │
└─────────────────────────────────────────────┘
```

### 5.2 재설계 플로우

```
문제 발견
    ↓
/sc:plan-redesign <phase>
    ↓
영향 분석 확인
    ↓
재설계 사유 입력
    ↓
원본 .md 파일 수정
    ↓
영향받는 Phase 상태 리셋
    ↓
계속 진행
```

### 5.3 롤백 플로우

```
문제 발생
    ↓
/sc:plan-rollback <phase>
    ↓
롤백 옵션 선택
    ↓
상태 롤백 적용
    ↓
(선택) Git 수동 롤백
    ↓
해당 Phase 재시작
```

---

## 6. FAQ

### Q1: 한 번에 여러 계획을 동시에 진행할 수 있나요?

**A**: 아니요. 현재 버전에서는 한 번에 하나의 활성 계획만 지원합니다.
다른 계획으로 전환하려면 `/sc:plan-switch` 명령을 사용하세요.

### Q2: 의존성을 무시하고 Phase를 시작할 수 있나요?

**A**: 아니요. 의존성은 강제됩니다. 선행 Phase를 먼저 완료해야 합니다.
이는 프로젝트 무결성을 위한 설계 결정입니다.

### Q3: 계획서 형식이 다르면 어떻게 되나요?

**A**: 파싱 실패 시 원인과 함께 에러 메시지가 표시됩니다.
지원 형식은 `### Phase X-Y: 이름` + `- [ ] 태스크` 패턴입니다.

### Q4: Git 롤백은 자동으로 되나요?

**A**: 아니요. 코드 롤백은 사용자가 수동으로 수행해야 합니다.
시스템은 필요한 Git 명령어를 안내해줍니다.

### Q5: 세션이 끊겨도 진행 상태가 유지되나요?

**A**: 예. Serena Memory와 `.superclaud/progress.yaml` 파일을 통해
세션 간 상태가 영속화됩니다.

### Q6: 원본 계획서가 수정되면 어떻게 되나요?

**A**: 재설계 명령을 통해 수정하면 상태 파일도 동기화됩니다.
외부에서 직접 수정 시 `source_hash` 불일치 경고가 표시될 수 있습니다.

### Q7: Phase 완료는 자동으로 감지되나요?

**A**: 아니요. 완료는 수동으로 `/sc:plan-complete` 명령을 실행해야 합니다.
다만, 모든 태스크 완료 시 자동으로 완료 가능 알림이 표시됩니다.

---
